(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(9),s=n.n(c),i=n(1),o=n(6),u=n(3);function l(e,t){return e[t]}var j=n(4),h=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]];function f(e,t){for(var n=[],a=0;a<e;a++){for(var r=[],c=0;c<t;c++)r.push({state:"hide",adjCount:0});n.push(r)}return n}function d(e,t,n,a,r){var c=[a.length,a[0].length],s=c[0],o=c[1],u=s*o,l=O(e,t,s,o).length,h=Math.max(0,n-(u-(l+1)));!function(e,t,n,a,r,c){for(var s=Object(j.a)(r),i=0;i<r.length;i++)for(var o=0;o<r[0].length;o++)i===e&&o===t?s[i][o].hasMine=!1:m(i,o,e,t)?s[i][o].hasMine=a.pop():s[i][o].hasMine=n.pop();c(s)}(e,t,b(u-(l+1),n-h),b(l,h),a,r),function(e,t){for(var n=Object(j.a)(e),a=function(t){for(var a=function(a){O(t,a,e.length,e[0].length).forEach((function(r){var c=Object(i.a)(r,2),s=c[0],o=c[1];e[s][o].hasMine&&(n[t][a].adjCount+=1)}))},r=0;r<e[0].length;r++)a(r)},r=0;r<e.length;r++)a(r);t(n)}(a,r)}function b(e,t){for(var n=[],a=0;a<e;a++)a<t?n.push(!0):n.push(!1);return function(e){for(var t=0;t<e.length;t++){var n=v(t,e.length-1),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(n)}function m(e,t,n,a){var r=Math.abs(e-n),c=Math.abs(t-a);return r<=1&&c<=1&&r+c>0}function O(e,t,n,a){return h.map((function(n){var a=Object(i.a)(n,2),r=a[0],c=a[1];return[e+r,t+c]})).filter((function(e){var t=Object(i.a)(e,2),r=t[0],c=t[1];return 0<=r&&r<n&&0<=c&&c<a}))}function v(e,t){return Math.floor(Math.random()*(t-e+1))+e}var g=n(0);function p(e,t,n,a,r){var c=e.rows,s=e.columns,i=e.mines;a("reset"),t(i),n(0),r(f(c,s))}function x(e,t,n,a,r){for(;e.length>0;){var c=e.pop(),s=Object(i.a)(c,2),o=s[0],u=s[1];if("hide"===a[o][u].state){var l=Object(j.a)(a);l[o][u].state="show",r(l),a[o][u].hasMine?n("lost"):(t((function(e){return e+1})),0===a[o][u].adjCount&&O(o,u,a.length,a[0].length).forEach((function(t){var n=Object(i.a)(t,2),r=n[0],c=n[1];"hide"===a[r][c].state&&e.push([r,c])})))}}}function w(e,t,n,a,r,c,s,o){if("won"!==r&&"lost"!==r){var u=s[e][t];if("reset"===r&&"hide"===u.state&&(c("ongoing"),d(e,t,n,s,o)),"hide"===u.state&&u.hasMine){var l=Object(j.a)(s);l[e][t].state="show",o(l),c("lost")}else"hide"===u.state?x([[e,t]],a,c,s,o):"show"===u.state&&function(e,t,n){var a=[n.length,n[0].length],r=a[0],c=a[1];return n[e][t].adjCount===O(e,t,r,c).filter((function(e){var t=Object(i.a)(e,2),a=t[0],r=t[1];return"flag"===n[a][r].state})).length}(e,t,s)&&function(e,t,n,a,r,c){var s=[r.length,r[0].length];x(O(e,t,s[0],s[1]),n,a,r,c)}(e,t,a,c,s,o)}}function y(e){var t=e.args,n=t.rowInd,a=t.colInd,r=t.hasMine,c=t.setRevealCount,s=t.state,i=t.adjCount,o=t.mineCount,u=t.gameState,l=t.setGameState,h=t.field,f=t.setField;return Object(g.jsx)("td",{className:"cell",children:Object(g.jsxs)("button",{type:"button",className:"clickable todo",onClick:function(){return w(n,a,o,c,u,l,h,f)},onContextMenu:function(e){return function(e,t,n,a,r,c){if(e.preventDefault(),"won"!==a&&"lost"!==a){var s=r[t][n];"hide"===s.state?c((function(e){var a=Object(j.a)(e);return a[t][n].state="flag",a})):"flag"===s.state&&c((function(e){var a=Object(j.a)(e);return a[t][n].state="hide",a}))}}(e,n,a,u,h,f)},children:["show"===s&&(r?"M":i),"flag"===s&&"!!!!"]})})}var C=function(e){var t=e.args,n=t.mineCount,a=t.setRevealCount,r=t.gameState,c=t.setGameState,s=t.field,i=t.setField;return Object(g.jsx)("table",{className:"field",children:Object(g.jsx)("tbody",{children:s.map((function(e,t){return Object(g.jsx)("tr",{children:e.map((function(e,o){return Object(g.jsx)(y,{args:Object(u.a)(Object(u.a)({},e),{},{rowInd:t,colInd:o,mineCount:n,setRevealCount:a,gameState:r,setGameState:c,field:s,setField:i})},o)}))},t)}))})})},M=["Easy","Medium","Hard"],S=["Rows","Columns","Mines"];function k(e,t){var n=t.rows,a=t.columns,r=t.mines;switch(e){case"mines":return 0<=r&&r<n*a;case"rows":return 0<n&&n<=24;case"columns":return 0<a&&a<=30;default:return!1}}function F(e){switch(e){case"easy":return{rows:9,columns:9,mines:10};case"medium":return{rows:16,columns:16,mines:40};case"hard":return{rows:16,columns:30,mines:99};default:return{rows:10,columns:10,mines:99}}}function I(e){var t=e.toLowerCase(),n=F(t);return t+": "+n.rows+"x"+n.columns+", "+n.mines+" mines"}function R(e){switch(e){case"rows":return"Must be between 1 and 24 inclusive.";case"columns":return"Must be between 1 and 30 inclusive.";case"mines":return"Must be fewer mines than cells.";default:return"An unknown error has occured."}}function G(e,t,n,a){var r=l(t,e);(a>0||r>0)&&n(Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},e,r+a)))}function N(e){var t=e.difficulty,n=e.inputs,a=e.setInputs,r=t.toLowerCase();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("input",{type:"radio",id:r,name:"difficulty",value:r,checked:n.difficulty===r,onChange:function(e){return function(e,t,n){n(Object(u.a)(Object(u.a)({},t),{},{difficulty:e.target.value}))}(e,n,a)}}),Object(g.jsx)("label",{htmlFor:r,children:I(t)})]})}function E(e){var t=e.input,n=e.inputs,a=e.setInputs,r=t.toLowerCase();return Object(g.jsxs)("label",{htmlFor:r,children:[t,":",Object(g.jsx)("button",{type:"button",onClick:function(){return G(r,n,a,-1)},children:"-"}),Object(g.jsx)("input",{type:"text",id:r,name:r,value:l(n,r),onChange:function(e){return function(e,t,n,a){var r=e.target.value,c=+r;(function(e){return""===e||/^[0-9\b]+$/.test(e)})(r)&&n(Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},a,c)))}(e,n,a,r)}}),Object(g.jsx)("button",{type:"button",onClick:function(){return G(r,n,a,1)},children:"+"}),k(r,n)?Object(g.jsx)("span",{style:{color:"green"},children:"\u2713"}):Object(g.jsxs)("span",{className:"toolcontainer",style:{color:"red"},children:["\u2717",Object(g.jsx)("span",{className:"tooltip",children:R(r)})]}),"Mines"===t&&Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{children:"Mine density:"}),n.rows>0&&n.columns>0?Math.round(100*n.mines/(n.rows*n.columns))+"%":"N/A"]})]})}var L=function(e){var t=e.args,n=t.setMineCount,r=t.setRevealCount,c=t.setGameState,s=t.setField,o=Object(a.useState)({rows:9,columns:9,mines:10,difficulty:"easy"}),u=Object(i.a)(o,2),l=u[0],j=u[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{children:"Select a standard difficulty, or specify custom parameters."}),Object(g.jsx)("p",{children:"For a custom game, a mine density between 12% and 20% is recommended."}),M.map((function(e){return Object(g.jsx)(N,{difficulty:e,inputs:l,setInputs:j},e)})),Object(g.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,a,r){p(F(e),t,n,a,r)}(l.difficulty,n,r,c,s)},children:"Start Standard Game"}),Object(g.jsx)("br",{}),S.map((function(e){return Object(g.jsx)(E,{input:e,inputs:l,setInputs:j},e)})),Object(g.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,a,r){S.every((function(t){return k(t.toLowerCase(),e)}))?p(e,t,n,a,r):alert('Invalid parameters. However over red "x"s for details.')}(l,n,r,c,s)},children:"Start Custom Game"})]})};function T(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"Rules"}),Object(g.jsx)("p",{children:"All cells start covered. Certain cells have mines hidden underneath them. The goal is to uncover all the cells without mines. If you uncover a mine, you lose."}),Object(g.jsx)("p",{children:"When you uncover a non-mine cell, it will show you how many of the (up to 8) adjacent cells contain mines -- or, if there are no adjacent mines, it will automatically uncover all adjacent cells for you."}),Object(g.jsx)("p",{children:"You can mark cells that you think contain mines with a flag by right-clicking on them. Clicking a flagged cell will do nothing -- so you can't accidentally click it later. To unflag a cell, simply right-click it again."}),Object(g.jsx)("p",{children:"If you click an aready-uncovered cell and it's number matches the number of adjacent flags, all other adjecent cells will be uncovered. This can save you some clicks, but isn't necessary."})]})}var A=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{type:"button",onClick:function(){return r(!n)},children:n?"Hide Rules":"Show Rules"}),n&&Object(g.jsx)(T,{})]})};var H=function(e){var t=e.args.gameState;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("p",{children:["The game is ",t,"."]}),Object(g.jsx)(A,{})]})};n(15),n(16);var J=function(){var e=Object(a.useState)(10),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),s=Object(i.a)(c,2),o=s[0],u=s[1],l=Object(a.useState)("reset"),j=Object(i.a)(l,2),h=j[0],d=j[1],b=Object(a.useState)(f(9,9)),m=Object(i.a)(b,2),O=m[0],v=m[1];return Object(a.useEffect)((function(){o+n===O.length*O[0].length&&d("won")}),[o,n,O]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Minesweeper"}),Object(g.jsx)(L,{args:{setMineCount:r,setRevealCount:u,setGameState:d,setField:v}}),Object(g.jsx)(C,{args:{mineCount:n,gameState:h,setGameState:d,field:O,setField:v,setRevealCount:u}}),Object(g.jsx)(H,{args:{gameState:h}})]})};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(J,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.6cd0400c.chunk.js.map