(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=n(9),c=n.n(s),i=n(1),o=n(6),u=n(3);function l(e,t){return e[t]}var f=n(4),j=n.p+"static/media/flag.12de066e.svg",d=n.p+"static/media/mine.99a3231c.svg",h=n.p+"static/media/flagged-mine.419c9e8a.svg",b=n.p+"static/media/clicked-mine.90b81e3c.svg",m=n(0),g=Object(m.jsx)("img",{src:j,alt:"F"}),O=Object(m.jsx)("img",{src:d,alt:"M"}),v=Object(m.jsx)("img",{src:h,alt:"FM"}),p=Object(m.jsx)("img",{src:b,alt:"!!!"});function w(e,t,n,r){if("reset"===r||"ongoing"===r)switch(t){case"hide":return"";case"show":return n;case"flag":return g;default:return"Error!"}else{if("won"===r)return e?"hide"===t?O:v:n;if("lost"===r)if(e)switch(t){case"hide":return O;case"show":return p;case"flag":return v;default:return"Error!"}else switch(t){case"hide":return"";case"show":return n;case"flag":return g;default:return"Error!"}}}function x(e,t,n,r){return"show"===t?"cell":"cell hidden"}function y(e,t,n,r){return"won"===r||"lost"===r?"_"+n.toString():"hide"===t?"clickable":"_"+n.toString()}function C(e,t,n,r,a,s,c,o){if("won"!==a&&"lost"!==a){var u=c[e][t];if("reset"===a&&"hide"===u.state&&(s("ongoing"),function(e,t,n,r,a){var s=[r.length,r[0].length],c=s[0],o=s[1],u=c*o,l=R(e,t,c,o).length,j=Math.max(0,n-(u-(l+1))),d=k(u-(l+1),n-j),h=k(l,j);(function(e,t,n,r,a,s){for(var c=Object(f.a)(a),i=0;i<a.length;i++)for(var o=0;o<a[0].length;o++)i===e&&o===t?c[i][o].hasMine=!1:I(i,o,e,t)?c[i][o].hasMine=r.pop():c[i][o].hasMine=n.pop();s(c)})(e,t,d,h,r,a),function(e,t){for(var n=Object(f.a)(e),r=function(t){for(var r=function(r){R(t,r,e.length,e[0].length).forEach((function(a){var s=Object(i.a)(a,2),c=s[0],o=s[1];e[c][o].hasMine&&(n[t][r].adjCount+=1)}))},a=0;a<e[0].length;a++)r(a)},a=0;a<e.length;a++)r(a);t(n)}(r,a)}(e,t,n,c,o)),"hide"===u.state&&u.hasMine){var l=Object(f.a)(c);l[e][t].state="show",o(l),s("lost")}else"hide"===u.state?N([[e,t]],r,s,c,o):"show"===u.state&&function(e,t,n){var r=[n.length,n[0].length],a=r[0],s=r[1];return n[e][t].adjCount===R(e,t,a,s).filter((function(e){var t=Object(i.a)(e,2),r=t[0],a=t[1];return"flag"===n[r][a].state})).length}(e,t,c)&&function(e,t,n,r,a,s){var c=[a.length,a[0].length],i=c[0],o=c[1];N(R(e,t,i,o),n,r,a,s)}(e,t,r,s,c,o)}}var M=function(e){var t=e.args,n=t.rowInd,r=t.colInd,a=t.hasMine,s=t.setRevealCount,c=t.setFlagCount,i=t.state,o=t.adjCount,u=t.mineCount,l=t.gameState,j=t.setGameState,d=t.field,h=t.setField;return Object(m.jsx)("td",{className:x(0,i),children:Object(m.jsx)("button",{type:"button",className:y(0,i,o,l),onClick:function(){return C(n,r,u,s,l,j,d,h)},onContextMenu:function(e){return function(e,t,n,r,a,s,c){if(e.preventDefault(),"won"!==r&&"lost"!==r){var i=s[t][n];"hide"===i.state?(c((function(e){var r=Object(f.a)(e);return r[t][n].state="flag",r})),a((function(e){return e+1}))):"flag"===i.state&&(c((function(e){var r=Object(f.a)(e);return r[t][n].state="hide",r})),a((function(e){return e-1})))}}(e,n,r,l,c,d,h)},children:w(a,i,o,l)})})},S=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]];function F(e,t){for(var n=[],r=0;r<e;r++){for(var a=[],s=0;s<t;s++)a.push({state:"hide",adjCount:0});n.push(a)}return n}function k(e,t){for(var n=[],r=0;r<e;r++)r<t?n.push(!0):n.push(!1);return function(e){for(var t=0;t<e.length;t++){var n=E(t,e.length-1),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}(n)}function I(e,t,n,r){var a=Math.abs(e-n),s=Math.abs(t-r);return a<=1&&s<=1&&a+s>0}function R(e,t,n,r){return S.map((function(n){var r=Object(i.a)(n,2),a=r[0],s=r[1];return[e+a,t+s]})).filter((function(e){var t=Object(i.a)(e,2),a=t[0],s=t[1];return 0<=a&&a<n&&0<=s&&s<r}))}function E(e,t){return Math.floor(Math.random()*(t-e+1))+e}function G(e,t,n,r,a,s){var c=e.rows,i=e.columns,o=e.mines;a("reset"),t(o),n(0),r(0),s(F(c,i))}function N(e,t,n,r,a){for(;e.length>0;){var s=e.pop(),c=Object(i.a)(s,2),o=c[0],u=c[1];if("hide"===r[o][u].state){var l=Object(f.a)(r);l[o][u].state="show",a(l),r[o][u].hasMine?n("lost"):(t((function(e){return e+1})),0===r[o][u].adjCount&&R(o,u,r.length,r[0].length).forEach((function(t){var n=Object(i.a)(t,2),a=n[0],s=n[1];"hide"===r[a][s].state&&e.push([a,s])})))}}}var T=function(e){var t=e.args,n=t.mineCount,r=t.setRevealCount,a=t.setFlagCount,s=t.gameState,c=t.setGameState,i=t.field,o=t.setField;return Object(m.jsx)("table",{className:"field",children:Object(m.jsx)("tbody",{children:i.map((function(e,t){return Object(m.jsx)("tr",{children:e.map((function(e,l){return Object(m.jsx)(M,{args:Object(u.a)(Object(u.a)({},e),{},{rowInd:t,colInd:l,mineCount:n,setRevealCount:r,setFlagCount:a,gameState:s,setGameState:c,field:i,setField:o})},l)}))},t)}))})})},L=["Easy","Medium","Hard"],A=["Rows","Columns","Mines"];function H(e,t){var n=t.rows,r=t.columns,a=t.mines;switch(e){case"mines":return 0<=a&&a<n*r;case"rows":return 0<n&&n<=24;case"columns":return 0<r&&r<=30;default:return!1}}function Y(e){switch(e){case"easy":return{rows:9,columns:9,mines:10};case"medium":return{rows:16,columns:16,mines:40};case"hard":return{rows:16,columns:30,mines:99};default:return{rows:10,columns:10,mines:99}}}function J(e){var t=e.toLowerCase(),n=Y(t);return t+": "+n.rows+"x"+n.columns+", "+n.mines+" mines"}function _(e){switch(e){case"rows":return"Must be between 1 and 24 inclusive.";case"columns":return"Must be between 1 and 30 inclusive.";case"mines":return"Must be fewer mines than cells.";default:return"An unknown error has occured."}}function B(e,t,n,r){var a=l(t,e);(r>0||a>0)&&n(Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},e,a+r)))}function D(e){var t=e.difficulty,n=e.inputs,r=e.setInputs,a=t.toLowerCase();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("input",{type:"radio",id:a,name:"difficulty",value:a,checked:n.difficulty===a,onChange:function(e){return function(e,t,n){n(Object(u.a)(Object(u.a)({},t),{},{difficulty:e.target.value}))}(e,n,r)}}),Object(m.jsx)("label",{htmlFor:a,children:J(t)})]})}function U(e){var t=e.input,n=e.inputs,r=e.setInputs,a=t.toLowerCase();return Object(m.jsxs)("label",{htmlFor:a,children:[t,":",Object(m.jsx)("button",{type:"button",onClick:function(){return B(a,n,r,-1)},children:"-"}),Object(m.jsx)("input",{type:"text",id:a,name:a,value:l(n,a),onChange:function(e){return function(e,t,n,r){var a=e.target.value,s=+a;(function(e){return""===e||/^[0-9\b]+$/.test(e)})(a)&&n(Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},r,s)))}(e,n,r,a)}}),Object(m.jsx)("button",{type:"button",onClick:function(){return B(a,n,r,1)},children:"+"}),H(a,n)?Object(m.jsx)("span",{style:{color:"green"},children:"\u2713"}):Object(m.jsxs)("span",{className:"toolcontainer",style:{color:"red"},children:["\u2717",Object(m.jsx)("span",{className:"tooltip",children:_(a)})]}),"Mines"===t&&Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"Mine density:"}),n.rows>0&&n.columns>0?Math.round(100*n.mines/(n.rows*n.columns))+"%":"N/A"]})]})}var W=function(e){var t=e.args,n=t.setMineCount,a=t.setRevealCount,s=t.setFlagCount,c=t.setGameState,o=t.setField,u=Object(r.useState)({rows:9,columns:9,mines:10,difficulty:"easy"}),l=Object(i.a)(u,2),f=l[0],j=l[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Select a standard difficulty, or specify custom parameters."}),Object(m.jsx)("p",{children:"For a custom game, a mine density between 12% and 20% is recommended."}),L.map((function(e){return Object(m.jsx)(D,{difficulty:e,inputs:f,setInputs:j},e)})),Object(m.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,r,a,s){G(Y(e),t,n,r,a,s)}(f.difficulty,n,a,s,c,o)},children:"Start Standard Game"}),Object(m.jsx)("br",{}),A.map((function(e){return Object(m.jsx)(U,{input:e,inputs:f,setInputs:j},e)})),Object(m.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,r,a,s){A.every((function(t){return H(t.toLowerCase(),e)}))?G(e,t,n,r,a,s):alert('Invalid parameters. However over red "x"s for details.')}(f,n,a,s,c,o)},children:"Start Custom Game"})]})};function $(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Rules"}),Object(m.jsx)("p",{children:"All cells start covered. Certain cells have mines hidden underneath them. The goal is to uncover all the cells without mines. If you uncover a mine, you lose."}),Object(m.jsx)("p",{children:"When you uncover a non-mine cell, it will show you how many of the (up to 8) adjacent cells contain mines -- or, if there are no adjacent mines, it will automatically uncover all adjacent cells for you."}),Object(m.jsx)("p",{children:"You can mark cells that you think contain mines with a flag by right-clicking on them. Clicking a flagged cell will do nothing -- so you can't accidentally click it later. To unflag a cell, simply right-click it again."}),Object(m.jsx)("p",{children:"If you click an aready-uncovered cell and it's number matches the number of adjacent flags, all other adjecent cells will be uncovered. This can save you some clicks, but isn't necessary."})]})}var q=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{type:"button",className:"rules",onClick:function(){return a(!n)},children:n?"Hide Rules":"Show Rules"}),n&&Object(m.jsx)($,{})]})};function z(e){switch(e){case"reset":return"The field is reset. Click anywhere to begin.";case"ongoing":return"The game is in progress.";case"won":return"Congratulations, you won!";case"lost":return"Uh oh, you uncovered a mine. You lost.";default:return"You found an error!"}}var K=function(e){var t=e.args,n=t.gameState,r=t.flagCount;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{children:["Flags: ",Object(m.jsx)("span",{className:"fixed-width-span",children:r})]}),Object(m.jsx)("p",{children:z(n)}),Object(m.jsx)(q,{})]})};n(15),n(16),n(17);var P=function(){var e=Object(r.useState)(10),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(0),c=Object(i.a)(s,2),o=c[0],u=c[1],l=Object(r.useState)(0),f=Object(i.a)(l,2),j=f[0],d=f[1],h=Object(r.useState)("reset"),b=Object(i.a)(h,2),g=b[0],O=b[1],v=Object(r.useState)(F(9,9)),p=Object(i.a)(v,2),w=p[0],x=p[1];return Object(r.useEffect)((function(){o+n===w.length*w[0].length&&O("won")}),[o,n,w]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Minesweeper"}),Object(m.jsx)(W,{args:{setMineCount:a,setRevealCount:u,setFlagCount:d,setGameState:O,setField:x}}),Object(m.jsx)(T,{args:{mineCount:n,gameState:g,setGameState:O,field:w,setField:x,setRevealCount:u,setFlagCount:d}}),Object(m.jsx)(K,{args:{gameState:g,flagCount:j}})]})};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.bb89dc7b.chunk.js.map