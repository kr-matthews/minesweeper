(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(9),s=n.n(c),i=n(1),u=n(6),o=n(3);function l(e,t){return e[t]}var j=n(4),d=n.p+"static/media/flag.12de066e.svg",f=n.p+"static/media/mine.99a3231c.svg",h=n.p+"static/media/flagged-mine.419c9e8a.svg",b=n.p+"static/media/clicked-mine.90b81e3c.svg",m=n(0),O=Object(m.jsx)("img",{src:d,alt:"F"}),g=Object(m.jsx)("img",{src:f,alt:"M"}),v=Object(m.jsx)("img",{src:h,alt:"FM"}),p=Object(m.jsx)("img",{src:b,alt:"!!!"});function w(e,t,n,r){if("reset"===r||"ongoing"===r)switch(t){case"hide":return"";case"show":return n;case"flag":return O;default:return"Error!"}else{if("won"===r)return e?"hide"===t?g:v:n;if("lost"===r)if(e)switch(t){case"hide":return g;case"show":return p;case"flag":return v;default:return"Error!"}else switch(t){case"hide":return"";case"show":return n;case"flag":return O;default:return"Error!"}}}function x(e,t,n,r){return"show"===t?"cell":"cell hidden"}function y(e,t,n,r){return"won"===r||"lost"===r?"":"hide"===t?"clickable":void 0}function C(e,t,n,r,a,c,s,u){if("won"!==a&&"lost"!==a){var o=s[e][t];if("reset"===a&&"hide"===o.state&&(c("ongoing"),function(e,t,n,r,a){var c=[r.length,r[0].length],s=c[0],u=c[1],o=s*u,l=R(e,t,s,u).length,d=Math.max(0,n-(o-(l+1))),f=F(o-(l+1),n-d),h=F(l,d);(function(e,t,n,r,a,c){for(var s=Object(j.a)(a),i=0;i<a.length;i++)for(var u=0;u<a[0].length;u++)i===e&&u===t?s[i][u].hasMine=!1:I(i,u,e,t)?s[i][u].hasMine=r.pop():s[i][u].hasMine=n.pop();c(s)})(e,t,f,h,r,a),function(e,t){for(var n=Object(j.a)(e),r=function(t){for(var r=function(r){R(t,r,e.length,e[0].length).forEach((function(a){var c=Object(i.a)(a,2),s=c[0],u=c[1];e[s][u].hasMine&&(n[t][r].adjCount+=1)}))},a=0;a<e[0].length;a++)r(a)},a=0;a<e.length;a++)r(a);t(n)}(r,a)}(e,t,n,s,u)),"hide"===o.state&&o.hasMine){var l=Object(j.a)(s);l[e][t].state="show",u(l),c("lost")}else"hide"===o.state?N([[e,t]],r,c,s,u):"show"===o.state&&function(e,t,n){var r=[n.length,n[0].length],a=r[0],c=r[1];return n[e][t].adjCount===R(e,t,a,c).filter((function(e){var t=Object(i.a)(e,2),r=t[0],a=t[1];return"flag"===n[r][a].state})).length}(e,t,s)&&function(e,t,n,r,a,c){var s=[a.length,a[0].length],i=s[0],u=s[1];N(R(e,t,i,u),n,r,a,c)}(e,t,r,c,s,u)}}var M=function(e){var t=e.args,n=t.rowInd,r=t.colInd,a=t.hasMine,c=t.setRevealCount,s=t.state,i=t.adjCount,u=t.mineCount,o=t.gameState,l=t.setGameState,d=t.field,f=t.setField;return Object(m.jsx)("td",{className:x(0,s),children:Object(m.jsx)("button",{type:"button",className:y(0,s,0,o),onClick:function(){return C(n,r,u,c,o,l,d,f)},onContextMenu:function(e){return function(e,t,n,r,a,c){if(e.preventDefault(),"won"!==r&&"lost"!==r){var s=a[t][n];"hide"===s.state?c((function(e){var r=Object(j.a)(e);return r[t][n].state="flag",r})):"flag"===s.state&&c((function(e){var r=Object(j.a)(e);return r[t][n].state="hide",r}))}}(e,n,r,o,d,f)},children:w(a,s,i,o)})})},S=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]];function k(e,t){for(var n=[],r=0;r<e;r++){for(var a=[],c=0;c<t;c++)a.push({state:"hide",adjCount:0});n.push(a)}return n}function F(e,t){for(var n=[],r=0;r<e;r++)r<t?n.push(!0):n.push(!1);return function(e){for(var t=0;t<e.length;t++){var n=E(t,e.length-1),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}(n)}function I(e,t,n,r){var a=Math.abs(e-n),c=Math.abs(t-r);return a<=1&&c<=1&&a+c>0}function R(e,t,n,r){return S.map((function(n){var r=Object(i.a)(n,2),a=r[0],c=r[1];return[e+a,t+c]})).filter((function(e){var t=Object(i.a)(e,2),a=t[0],c=t[1];return 0<=a&&a<n&&0<=c&&c<r}))}function E(e,t){return Math.floor(Math.random()*(t-e+1))+e}function G(e,t,n,r,a){var c=e.rows,s=e.columns,i=e.mines;r("reset"),t(i),n(0),a(k(c,s))}function N(e,t,n,r,a){for(;e.length>0;){var c=e.pop(),s=Object(i.a)(c,2),u=s[0],o=s[1];if("hide"===r[u][o].state){var l=Object(j.a)(r);l[u][o].state="show",a(l),r[u][o].hasMine?n("lost"):(t((function(e){return e+1})),0===r[u][o].adjCount&&R(u,o,r.length,r[0].length).forEach((function(t){var n=Object(i.a)(t,2),a=n[0],c=n[1];"hide"===r[a][c].state&&e.push([a,c])})))}}}var L=function(e){var t=e.args,n=t.mineCount,r=t.setRevealCount,a=t.gameState,c=t.setGameState,s=t.field,i=t.setField;return Object(m.jsx)("table",{className:"field",children:Object(m.jsx)("tbody",{children:s.map((function(e,t){return Object(m.jsx)("tr",{children:e.map((function(e,u){return Object(m.jsx)(M,{args:Object(o.a)(Object(o.a)({},e),{},{rowInd:t,colInd:u,mineCount:n,setRevealCount:r,gameState:a,setGameState:c,field:s,setField:i})},u)}))},t)}))})})},T=["Easy","Medium","Hard"],A=["Rows","Columns","Mines"];function H(e,t){var n=t.rows,r=t.columns,a=t.mines;switch(e){case"mines":return 0<=a&&a<n*r;case"rows":return 0<n&&n<=24;case"columns":return 0<r&&r<=30;default:return!1}}function J(e){switch(e){case"easy":return{rows:9,columns:9,mines:10};case"medium":return{rows:16,columns:16,mines:40};case"hard":return{rows:16,columns:30,mines:99};default:return{rows:10,columns:10,mines:99}}}function B(e){var t=e.toLowerCase(),n=J(t);return t+": "+n.rows+"x"+n.columns+", "+n.mines+" mines"}function D(e){switch(e){case"rows":return"Must be between 1 and 24 inclusive.";case"columns":return"Must be between 1 and 30 inclusive.";case"mines":return"Must be fewer mines than cells.";default:return"An unknown error has occured."}}function W(e,t,n,r){var a=l(t,e);(r>0||a>0)&&n(Object(o.a)(Object(o.a)({},t),{},Object(u.a)({},e,a+r)))}function Y(e){var t=e.difficulty,n=e.inputs,r=e.setInputs,a=t.toLowerCase();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("input",{type:"radio",id:a,name:"difficulty",value:a,checked:n.difficulty===a,onChange:function(e){return function(e,t,n){n(Object(o.a)(Object(o.a)({},t),{},{difficulty:e.target.value}))}(e,n,r)}}),Object(m.jsx)("label",{htmlFor:a,children:B(t)})]})}function $(e){var t=e.input,n=e.inputs,r=e.setInputs,a=t.toLowerCase();return Object(m.jsxs)("label",{htmlFor:a,children:[t,":",Object(m.jsx)("button",{type:"button",onClick:function(){return W(a,n,r,-1)},children:"-"}),Object(m.jsx)("input",{type:"text",id:a,name:a,value:l(n,a),onChange:function(e){return function(e,t,n,r){var a=e.target.value,c=+a;(function(e){return""===e||/^[0-9\b]+$/.test(e)})(a)&&n(Object(o.a)(Object(o.a)({},t),{},Object(u.a)({},r,c)))}(e,n,r,a)}}),Object(m.jsx)("button",{type:"button",onClick:function(){return W(a,n,r,1)},children:"+"}),H(a,n)?Object(m.jsx)("span",{style:{color:"green"},children:"\u2713"}):Object(m.jsxs)("span",{className:"toolcontainer",style:{color:"red"},children:["\u2717",Object(m.jsx)("span",{className:"tooltip",children:D(a)})]}),"Mines"===t&&Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"Mine density:"}),n.rows>0&&n.columns>0?Math.round(100*n.mines/(n.rows*n.columns))+"%":"N/A"]})]})}var q=function(e){var t=e.args,n=t.setMineCount,a=t.setRevealCount,c=t.setGameState,s=t.setField,u=Object(r.useState)({rows:9,columns:9,mines:10,difficulty:"easy"}),o=Object(i.a)(u,2),l=o[0],j=o[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Select a standard difficulty, or specify custom parameters."}),Object(m.jsx)("p",{children:"For a custom game, a mine density between 12% and 20% is recommended."}),T.map((function(e){return Object(m.jsx)(Y,{difficulty:e,inputs:l,setInputs:j},e)})),Object(m.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,r,a){G(J(e),t,n,r,a)}(l.difficulty,n,a,c,s)},children:"Start Standard Game"}),Object(m.jsx)("br",{}),A.map((function(e){return Object(m.jsx)($,{input:e,inputs:l,setInputs:j},e)})),Object(m.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,r,a){A.every((function(t){return H(t.toLowerCase(),e)}))?G(e,t,n,r,a):alert('Invalid parameters. However over red "x"s for details.')}(l,n,a,c,s)},children:"Start Custom Game"})]})};function z(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Rules"}),Object(m.jsx)("p",{children:"All cells start covered. Certain cells have mines hidden underneath them. The goal is to uncover all the cells without mines. If you uncover a mine, you lose."}),Object(m.jsx)("p",{children:"When you uncover a non-mine cell, it will show you how many of the (up to 8) adjacent cells contain mines -- or, if there are no adjacent mines, it will automatically uncover all adjacent cells for you."}),Object(m.jsx)("p",{children:"You can mark cells that you think contain mines with a flag by right-clicking on them. Clicking a flagged cell will do nothing -- so you can't accidentally click it later. To unflag a cell, simply right-click it again."}),Object(m.jsx)("p",{children:"If you click an aready-uncovered cell and it's number matches the number of adjacent flags, all other adjecent cells will be uncovered. This can save you some clicks, but isn't necessary."})]})}var K=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{type:"button",onClick:function(){return a(!n)},children:n?"Hide Rules":"Show Rules"}),n&&Object(m.jsx)(z,{})]})};var P=function(e){var t=e.args.gameState;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{children:["The game is ",t,"."]}),Object(m.jsx)(K,{})]})};n(15),n(16);var Q=function(){var e=Object(r.useState)(10),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),s=Object(i.a)(c,2),u=s[0],o=s[1],l=Object(r.useState)("reset"),j=Object(i.a)(l,2),d=j[0],f=j[1],h=Object(r.useState)(k(9,9)),b=Object(i.a)(h,2),O=b[0],g=b[1];return Object(r.useEffect)((function(){u+n===O.length*O[0].length&&f("won")}),[u,n,O]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Minesweeper"}),Object(m.jsx)(q,{args:{setMineCount:a,setRevealCount:o,setGameState:f,setField:g}}),Object(m.jsx)(L,{args:{mineCount:n,gameState:d,setGameState:f,field:O,setField:g,setRevealCount:o}}),Object(m.jsx)(P,{args:{gameState:d}})]})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(Q,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.cf9dc265.chunk.js.map