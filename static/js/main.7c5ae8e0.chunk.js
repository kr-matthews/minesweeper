(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n.n(r),a=n(9),c=n.n(a),u=n(1),i=n(6),o=n(3);function l(e,t){return e[t]}var j=n(4),b=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]];function f(e,t){for(var n=[],r=0;r<e;r++){for(var s=[],a=0;a<t;a++)s.push({state:"hide",adjCount:0});n.push(s)}return n}function d(e,t,n,r,s){var a=[r.length,r[0].length],c=a[0],i=a[1],o=c*i,l=O(e,t,c,i).length,b=Math.max(0,n-(o-(l+1)));!function(e,t,n,r,s,a){for(var c=Object(j.a)(s),u=0;u<s.length;u++)for(var i=0;i<s[0].length;i++)u===e&&i===t?c[u][i].hasMine=!1:m(u,i,e,t)?c[u][i].hasMine=r.pop():c[u][i].hasMine=n.pop();a(c)}(e,t,h(o-(l+1),n-b),h(l,b),r,s),function(e,t){for(var n=Object(j.a)(e),r=function(t){for(var r=function(r){O(t,r,e.length,e[0].length).forEach((function(s){var a=Object(u.a)(s,2),c=a[0],i=a[1];e[c][i].hasMine&&(n[t][r].adjCount+=1)}))},s=0;s<e[0].length;s++)r(s)},s=0;s<e.length;s++)r(s);t(n)}(r,s)}function h(e,t){for(var n=[],r=0;r<e;r++)r<t?n.push(!0):n.push(!1);return function(e){for(var t=0;t<e.length;t++){var n=v(t,e.length-1),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}(n)}function m(e,t,n,r){var s=Math.abs(e-n),a=Math.abs(t-r);return s<=1&&a<=1&&s+a>0}function O(e,t,n,r){return b.map((function(n){var r=Object(u.a)(n,2),s=r[0],a=r[1];return[e+s,t+a]})).filter((function(e){var t=Object(u.a)(e,2),s=t[0],a=t[1];return 0<=s&&s<n&&0<=a&&a<r}))}function v(e,t){return Math.floor(Math.random()*(t-e+1))+e}var p=n(0);function x(e,t,n,r,s){var a=e.rows,c=e.columns,u=e.mines;r("reset"),t(u),n(0),s(f(a,c))}function g(e,t,n,r,s,a,c,i){var o=c[e][t];if("hide"===o.state&&"reset"===s&&(a("ongoing"),d(e,t,n,c,i)),"hide"===o.state&&o.hasMine){var l=Object(j.a)(c);l[e][t].state="show",i(l),a("lost")}else"hide"===o.state&&function(e,t,n,r){for(;e.length>0;){var s=e.pop(),a=Object(u.a)(s,2),c=a[0],i=a[1];if("hide"===n[c][i].state){var o=Object(j.a)(n);o[c][i].state="show",r(o),t((function(e){return e+1})),0===n[c][i].adjCount&&O(c,i,n.length,n[0].length).forEach((function(t){var r=Object(u.a)(t,2),s=r[0],a=r[1];"hide"===n[s][a].state&&e.push([s,a])}))}}}([[e,t]],r,c,i)}function w(e){var t=e.args,n=t.rowInd,r=t.colInd,s=t.hasMine,a=t.setRevealCount,c=t.state,u=t.adjCount,i=t.mineCount,o=t.gameState,l=t.setGameState,b=t.field,f=t.setField;return Object(p.jsx)("td",{className:"cell",children:Object(p.jsx)("button",{type:"button",className:"clickable todo",onClick:function(){return g(n,r,i,a,o,l,b,f)},onContextMenu:function(e){return function(e,t,n,r,s){e.preventDefault();var a=r[t][n];"hide"===a.state?s((function(e){var r=Object(j.a)(e);return r[t][n].state="flag",r})):"flag"===a.state&&s((function(e){var r=Object(j.a)(e);return r[t][n].state="hide",r}))}(e,n,r,b,f)},children:"show"===c?s?"M":u:c})})}var C=function(e){var t=e.args,n=t.mineCount,r=t.setRevealCount,s=t.gameState,a=t.setGameState,c=t.field,u=t.setField;return Object(p.jsx)("table",{className:"field",children:Object(p.jsx)("tbody",{children:c.map((function(e,t){return Object(p.jsx)("tr",{children:e.map((function(e,i){return Object(p.jsx)(w,{args:Object(o.a)(Object(o.a)({},e),{},{rowInd:t,colInd:i,mineCount:n,setRevealCount:r,gameState:s,setGameState:a,field:c,setField:u})},i)}))},t)}))})})},y=["Easy","Medium","Hard"],M=["Rows","Columns","Mines"];function S(e,t){var n=t.rows,r=t.columns,s=t.mines;switch(e){case"mines":return 0<=s&&s<n*r;case"rows":return 0<n&&n<=24;case"columns":return 0<r&&r<=30;default:return!1}}function F(e){switch(e){case"easy":return{rows:9,columns:9,mines:10};case"medium":return{rows:16,columns:16,mines:40};case"hard":return{rows:16,columns:30,mines:99};default:return{rows:10,columns:10,mines:99}}}function k(e){var t=e.toLowerCase(),n=F(t);return t+": "+n.rows+"x"+n.columns+", "+n.mines+" mines"}function I(e){switch(e){case"rows":return"Must be between 1 and 24 inclusive.";case"columns":return"Must be between 1 and 30 inclusive.";case"mines":return"Must be fewer mines than cells.";default:return"An unknown error has occured."}}function R(e,t,n,r){var s=l(t,e);(r>0||s>0)&&n(Object(o.a)(Object(o.a)({},t),{},Object(i.a)({},e,s+r)))}function G(e){var t=e.difficulty,n=e.inputs,r=e.setInputs,s=t.toLowerCase();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{type:"radio",id:s,name:"difficulty",value:s,checked:n.difficulty===s,onChange:function(e){return function(e,t,n){n(Object(o.a)(Object(o.a)({},t),{},{difficulty:e.target.value}))}(e,n,r)}}),Object(p.jsx)("label",{htmlFor:s,children:k(t)})]})}function N(e){var t=e.input,n=e.inputs,r=e.setInputs,s=t.toLowerCase();return Object(p.jsxs)("label",{htmlFor:s,children:[t,":",Object(p.jsx)("button",{type:"button",onClick:function(){return R(s,n,r,-1)},children:"-"}),Object(p.jsx)("input",{type:"text",id:s,name:s,value:l(n,s),onChange:function(e){return function(e,t,n,r){var s=e.target.value,a=+s;(function(e){return""===e||/^[0-9\b]+$/.test(e)})(s)&&n(Object(o.a)(Object(o.a)({},t),{},Object(i.a)({},r,a)))}(e,n,r,s)}}),Object(p.jsx)("button",{type:"button",onClick:function(){return R(s,n,r,1)},children:"+"}),S(s,n)?Object(p.jsx)("span",{style:{color:"green"},children:"\u2713"}):Object(p.jsxs)("span",{className:"toolcontainer",style:{color:"red"},children:["\u2717",Object(p.jsx)("span",{className:"tooltip",children:I(s)})]}),"Mines"===t&&Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Mine density:"}),n.rows>0&&n.columns>0?Math.round(100*n.mines/(n.rows*n.columns))+"%":"N/A"]})]})}var E=function(e){var t=e.args,n=t.setMineCount,s=t.setRevealCount,a=t.setGameState,c=t.setField,i=Object(r.useState)({rows:9,columns:9,mines:10,difficulty:"easy"}),o=Object(u.a)(i,2),l=o[0],j=o[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{children:"Select a standard difficulty, or specify custom parameters."}),Object(p.jsx)("p",{children:"For a custom game, a mine density between 12% and 20% is recommended."}),y.map((function(e){return Object(p.jsx)(G,{difficulty:e,inputs:l,setInputs:j},e)})),Object(p.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,r,s){x(F(e),t,n,r,s)}(l.difficulty,n,s,a,c)},children:"Start Standard Game"}),Object(p.jsx)("br",{}),M.map((function(e){return Object(p.jsx)(N,{input:e,inputs:l,setInputs:j},e)})),Object(p.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,r,s){M.every((function(t){return S(t.toLowerCase(),e)}))?x(e,t,n,r,s):alert('Invalid parameters. However over red "x"s for details.')}(l,n,s,a,c)},children:"Start Custom Game"})]})};function L(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"Rules"}),Object(p.jsx)("p",{children:"Do this."}),Object(p.jsx)("p",{children:"Don't do that."})]})}var D=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{type:"button",onClick:function(){return s(!n)},children:n?"Hide Rules":"Show Rules"}),n&&Object(p.jsx)(L,{})]})};var H=function(e){var t=e.args.gameState;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["The game is ",t,"."]}),Object(p.jsx)(D,{})]})};n(15),n(16);var A=function(){var e=Object(r.useState)(10),t=Object(u.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(0),c=Object(u.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)("reset"),j=Object(u.a)(l,2),b=j[0],d=j[1],h=Object(r.useState)(f(9,9)),m=Object(u.a)(h,2),O=m[0],v=m[1];return Object(r.useEffect)((function(){i+n===O.length*O[0].length&&d("won")}),[i,n,O]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Minesweeper"}),Object(p.jsx)(E,{args:{setMineCount:s,setRevealCount:o,setGameState:d,setField:v}}),Object(p.jsx)(C,{args:{mineCount:n,gameState:b,setGameState:d,field:O,setField:v,setRevealCount:o}}),Object(p.jsx)(H,{args:{gameState:b}})]})};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(A,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.7c5ae8e0.chunk.js.map