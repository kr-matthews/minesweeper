(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=n(9),c=n.n(s),u=n(1),i=n(6),o=n(3);function l(e,t){return e[t]}var j=n(4),f=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]];function b(e,t){for(var n=[],r=0;r<e;r++){for(var a=[],s=0;s<t;s++)a.push({state:"hide",adjCount:0});n.push(a)}return n}function d(e,t,n,r,a){var s=[r.length,r[0].length],c=s[0],i=s[1],o=c*i,l=O(e,t,c,i).length,f=Math.max(0,n-(o-(l+1)));!function(e,t,n,r,a,s){for(var c=Object(j.a)(a),u=0;u<a.length;u++)for(var i=0;i<a[0].length;i++)u===e&&i===t?c[u][i].hasMine=!1:m(u,i,e,t)?c[u][i].hasMine=r.pop():c[u][i].hasMine=n.pop();s(c)}(e,t,h(o-(l+1),n-f),h(l,f),r,a),function(e,t){for(var n=Object(j.a)(e),r=function(t){for(var r=function(r){O(t,r,e.length,e[0].length).forEach((function(a){var s=Object(u.a)(a,2),c=s[0],i=s[1];e[c][i].hasMine&&(n[t][r].adjCount+=1)}))},a=0;a<e[0].length;a++)r(a)},a=0;a<e.length;a++)r(a);t(n)}(r,a)}function h(e,t){for(var n=[],r=0;r<e;r++)r<t?n.push(!0):n.push(!1);return function(e){for(var t=0;t<e.length;t++){var n=v(t,e.length-1),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}(n)}function m(e,t,n,r){var a=Math.abs(e-n),s=Math.abs(t-r);return a<=1&&s<=1&&a+s>0}function O(e,t,n,r){return f.map((function(n){var r=Object(u.a)(n,2),a=r[0],s=r[1];return[e+a,t+s]})).filter((function(e){var t=Object(u.a)(e,2),a=t[0],s=t[1];return 0<=a&&a<n&&0<=s&&s<r}))}function v(e,t){return Math.floor(Math.random()*(t-e+1))+e}var p=n(0);function g(e,t,n,r,a){var s=e.rows,c=e.columns,u=e.mines;r("reset"),t(u),n(0),a(b(s,c))}function x(e,t,n,r,a){for(;e.length>0;){var s=e.pop(),c=Object(u.a)(s,2),i=c[0],o=c[1];if("hide"===r[i][o].state){var l=Object(j.a)(r);l[i][o].state="show",a(l),r[i][o].hasMine?n("lost"):(t((function(e){return e+1})),0===r[i][o].adjCount&&O(i,o,r.length,r[0].length).forEach((function(t){var n=Object(u.a)(t,2),a=n[0],s=n[1];"hide"===r[a][s].state&&e.push([a,s])})))}}}function w(e,t,n,r,a,s,c,i){if("won"!==a&&"lost"!==a){var o=c[e][t];if("reset"===a&&"hide"===o.state&&(s("ongoing"),d(e,t,n,c,i)),"hide"===o.state&&o.hasMine){var l=Object(j.a)(c);l[e][t].state="show",i(l),s("lost")}else"hide"===o.state?x([[e,t]],r,s,c,i):"show"===o.state&&function(e,t,n){var r=[n.length,n[0].length],a=r[0],s=r[1];return n[e][t].adjCount===O(e,t,a,s).filter((function(e){var t=Object(u.a)(e,2),r=t[0],a=t[1];return"flag"===n[r][a].state})).length}(e,t,c)&&function(e,t,n,r,a,s){var c=[a.length,a[0].length];x(O(e,t,c[0],c[1]),n,r,a,s)}(e,t,r,s,c,i)}}function C(e){var t=e.args,n=t.rowInd,r=t.colInd,a=t.hasMine,s=t.setRevealCount,c=t.state,u=t.adjCount,i=t.mineCount,o=t.gameState,l=t.setGameState,f=t.field,b=t.setField;return Object(p.jsx)("td",{className:"cell",children:Object(p.jsxs)("button",{type:"button",className:"clickable todo",onClick:function(){return w(n,r,i,s,o,l,f,b)},onContextMenu:function(e){return function(e,t,n,r,a,s){if(e.preventDefault(),"won"!==r&&"lost"!==r){var c=a[t][n];"hide"===c.state?s((function(e){var r=Object(j.a)(e);return r[t][n].state="flag",r})):"flag"===c.state&&s((function(e){var r=Object(j.a)(e);return r[t][n].state="hide",r}))}}(e,n,r,o,f,b)},children:["show"===c&&(a?"M":u),"flag"===c&&"!!!!"]})})}var y=function(e){var t=e.args,n=t.mineCount,r=t.setRevealCount,a=t.gameState,s=t.setGameState,c=t.field,u=t.setField;return Object(p.jsx)("table",{className:"field",children:Object(p.jsx)("tbody",{children:c.map((function(e,t){return Object(p.jsx)("tr",{children:e.map((function(e,i){return Object(p.jsx)(C,{args:Object(o.a)(Object(o.a)({},e),{},{rowInd:t,colInd:i,mineCount:n,setRevealCount:r,gameState:a,setGameState:s,field:c,setField:u})},i)}))},t)}))})})},M=["Easy","Medium","Hard"],S=["Rows","Columns","Mines"];function F(e,t){var n=t.rows,r=t.columns,a=t.mines;switch(e){case"mines":return 0<=a&&a<n*r;case"rows":return 0<n&&n<=24;case"columns":return 0<r&&r<=30;default:return!1}}function k(e){switch(e){case"easy":return{rows:9,columns:9,mines:10};case"medium":return{rows:16,columns:16,mines:40};case"hard":return{rows:16,columns:30,mines:99};default:return{rows:10,columns:10,mines:99}}}function I(e){var t=e.toLowerCase(),n=k(t);return t+": "+n.rows+"x"+n.columns+", "+n.mines+" mines"}function R(e){switch(e){case"rows":return"Must be between 1 and 24 inclusive.";case"columns":return"Must be between 1 and 30 inclusive.";case"mines":return"Must be fewer mines than cells.";default:return"An unknown error has occured."}}function G(e,t,n,r){var a=l(t,e);(r>0||a>0)&&n(Object(o.a)(Object(o.a)({},t),{},Object(i.a)({},e,a+r)))}function N(e){var t=e.difficulty,n=e.inputs,r=e.setInputs,a=t.toLowerCase();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{type:"radio",id:a,name:"difficulty",value:a,checked:n.difficulty===a,onChange:function(e){return function(e,t,n){n(Object(o.a)(Object(o.a)({},t),{},{difficulty:e.target.value}))}(e,n,r)}}),Object(p.jsx)("label",{htmlFor:a,children:I(t)})]})}function E(e){var t=e.input,n=e.inputs,r=e.setInputs,a=t.toLowerCase();return Object(p.jsxs)("label",{htmlFor:a,children:[t,":",Object(p.jsx)("button",{type:"button",onClick:function(){return G(a,n,r,-1)},children:"-"}),Object(p.jsx)("input",{type:"text",id:a,name:a,value:l(n,a),onChange:function(e){return function(e,t,n,r){var a=e.target.value,s=+a;(function(e){return""===e||/^[0-9\b]+$/.test(e)})(a)&&n(Object(o.a)(Object(o.a)({},t),{},Object(i.a)({},r,s)))}(e,n,r,a)}}),Object(p.jsx)("button",{type:"button",onClick:function(){return G(a,n,r,1)},children:"+"}),F(a,n)?Object(p.jsx)("span",{style:{color:"green"},children:"\u2713"}):Object(p.jsxs)("span",{className:"toolcontainer",style:{color:"red"},children:["\u2717",Object(p.jsx)("span",{className:"tooltip",children:R(a)})]}),"Mines"===t&&Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Mine density:"}),n.rows>0&&n.columns>0?Math.round(100*n.mines/(n.rows*n.columns))+"%":"N/A"]})]})}var L=function(e){var t=e.args,n=t.setMineCount,a=t.setRevealCount,s=t.setGameState,c=t.setField,i=Object(r.useState)({rows:9,columns:9,mines:10,difficulty:"easy"}),o=Object(u.a)(i,2),l=o[0],j=o[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{children:"Select a standard difficulty, or specify custom parameters."}),Object(p.jsx)("p",{children:"For a custom game, a mine density between 12% and 20% is recommended."}),M.map((function(e){return Object(p.jsx)(N,{difficulty:e,inputs:l,setInputs:j},e)})),Object(p.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,r,a){g(k(e),t,n,r,a)}(l.difficulty,n,a,s,c)},children:"Start Standard Game"}),Object(p.jsx)("br",{}),S.map((function(e){return Object(p.jsx)(E,{input:e,inputs:l,setInputs:j},e)})),Object(p.jsx)("button",{type:"button",onClick:function(){return function(e,t,n,r,a){S.every((function(t){return F(t.toLowerCase(),e)}))?g(e,t,n,r,a):alert('Invalid parameters. However over red "x"s for details.')}(l,n,a,s,c)},children:"Start Custom Game"})]})};function D(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"Rules"}),Object(p.jsx)("p",{children:"Do this."}),Object(p.jsx)("p",{children:"Don't do that."})]})}var H=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{type:"button",onClick:function(){return a(!n)},children:n?"Hide Rules":"Show Rules"}),n&&Object(p.jsx)(D,{})]})};var A=function(e){var t=e.args.gameState;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["The game is ",t,"."]}),Object(p.jsx)(H,{})]})};n(15),n(16);var J=function(){var e=Object(r.useState)(10),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(0),c=Object(u.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)("reset"),j=Object(u.a)(l,2),f=j[0],d=j[1],h=Object(r.useState)(b(9,9)),m=Object(u.a)(h,2),O=m[0],v=m[1];return Object(r.useEffect)((function(){i+n===O.length*O[0].length&&d("won")}),[i,n,O]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Minesweeper"}),Object(p.jsx)(L,{args:{setMineCount:a,setRevealCount:o,setGameState:d,setField:v}}),Object(p.jsx)(y,{args:{mineCount:n,gameState:f,setGameState:d,field:O,setField:v,setRevealCount:o}}),Object(p.jsx)(A,{args:{gameState:f}})]})};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(J,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.a65ba7ec.chunk.js.map