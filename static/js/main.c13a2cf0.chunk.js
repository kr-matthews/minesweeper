(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n.n(s),r=n(11),c=n.n(r),i=n(1),o=n(6);var l=function(){var e=Object(s.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(0),c=Object(i.a)(r,2),o=c[0],l=c[1],u=Object(s.useState)("reset"),j=Object(i.a)(u,2),h=j[0],d=j[1],b=Object(s.useState)(null),m=Object(i.a)(b,2),f=m[0],g=m[1];return{time:o,state:h,handleStart:function(){var e=Date.now();a(e),d("running"),g(setInterval((function(){return l(Date.now()-e)}),10))},handleStop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null===e?Date.now()-n:e;clearInterval(f),a(null),d("stopped"),l(t)},handleReset:function(){clearInterval(f),a(null),d("reset"),l(0)}}},u=n(5),j=n(3);var h=function(){var e=Object(s.useState)(JSON.parse(localStorage.getItem("HS"))||{}),t=Object(i.a)(e,2),n=t[0],a=t[1];function r(e,t,n){return e+"-"+t+"-"+n}function c(e,t,s){var a=r(e,t,s),c=n[a];return void 0===c?Number.POSITIVE_INFINITY:c}return{getHighScore:c,updateHighScore:function(e,t,s,i){var o=r(e,t,s),l=c(e,t,s),h=Math.min(l,i),d=Object(j.a)(Object(j.a)({},n),{},Object(u.a)({},o,h));a(d),localStorage.setItem("HS",JSON.stringify(d))},resetHighScore:function(e,t,s){var c=r(e,t,s),i=Object(j.a)({},n);delete i[c],a(i),localStorage.setItem("HS",JSON.stringify(i))},resetHighScores:function(){a({}),localStorage.setItem("HS",JSON.stringify({}))}}},d=n(4),b=n.p+"static/media/flag.12de066e.svg",m=n.p+"static/media/question-mark.2c2b9207.svg",f=n.p+"static/media/mine.99a3231c.svg",g=n.p+"static/media/flagged-mine.419c9e8a.svg",O=n.p+"static/media/marked-mine.1978ea2d.svg",p=n.p+"static/media/clicked-mine.90b81e3c.svg",v=n(0),x=Object(v.jsx)("img",{src:b,alt:"F",onContextMenu:function(e){return e.preventDefault()}}),S=Object(v.jsx)("img",{src:m,alt:"?",onContextMenu:function(e){return e.preventDefault()}}),w=Object(v.jsx)("img",{src:f,alt:"M"}),y=Object(v.jsx)("img",{src:g,alt:"FM"}),C=Object(v.jsx)("img",{src:O,alt:"?M"}),N=Object(v.jsx)("img",{src:p,alt:"!!!"});function k(e,t,n,s){if("reset"===s||"ongoing"===s)switch(t){case"hide":return"";case"show":return n;case"flag":return x;case"mark":return S;default:return"Error!"}else{if("won"===s)return e?"hide"===t?w:"flag"===t?y:C:n;if("lost"===s)if(e)switch(t){case"hide":return w;case"show":return N;case"flag":return y;case"mark":return C;default:return"Error!"}else switch(t){case"hide":return"";case"show":return n;case"flag":return x;case"mark":return S;default:return"Error!"}}}function M(e,t,n,s,a,r){return"show"===t&&!e&&a&&r>0?"cell surplus":"show"===t?"cell":"cell hidden"}function I(e,t,n,s){return"won"===s||"lost"===s?"_"+n.toString():"hide"===t?"clickable":"_"+n.toString()}function F(e,t,n,s,a,r,c,o,l,u){if("won"!==a&&"lost"!==a){var j=c[e][t];if("reset"===a&&"hide"===j.state&&(r("ongoing"),function(e,t,n,s,a){var r=[s.length,s[0].length],c=r[0],o=r[1],l=c*o,u=E(e,t,c,o).length,j=Math.max(0,n-(l-(u+1))),h=Q(l-(u+1),n-j),b=Q(u,j);(function(e,t,n,s,a,r){for(var c=Object(d.a)(a),i=0;i<a.length;i++)for(var o=0;o<a[0].length;o++)i===e&&o===t?c[i][o].hasMine=!1:T(i,o,e,t)?c[i][o].hasMine=s.pop():c[i][o].hasMine=n.pop();r(c)})(e,t,h,b,s,a),function(e,t){for(var n=Object(d.a)(e),s=function(t){for(var s=function(s){E(t,s,e.length,e[0].length).forEach((function(a){var r=Object(i.a)(a,2),c=r[0],o=r[1];e[c][o].hasMine&&(n[t][s].adjCount+=1)}))},a=0;a<e[0].length;a++)s(a)},a=0;a<e.length;a++)s(a);t(n)}(s,a)}(e,t,n,c,o),l()),"hide"===j.state&&j.hasMine){var h=Object(d.a)(c);h[e][t].state="show",o(h),r("lost"),u()}else"hide"===j.state?J([[e,t]],s,r,c,o,u):"show"===j.state&&0===L(e,t,c)&&function(e,t,n,s,a,r,c){var i=[a.length,a[0].length],o=i[0],l=i[1];J(E(e,t,o,l),n,s,a,r,c)}(e,t,s,r,c,o,u)}}var H=function(e){var t=e.args,n=t.rowInd,s=t.colInd,a=t.hasMine,r=t.setRevealCount,c=t.setFlagCount,i=t.state,o=t.adjCount,l=t.mineCount,u=t.gameState,j=t.setGameState,h=t.field,b=t.setField,m=t.handleStart,f=t.handleStop,g=t.usingWarnings,O=t.usingQs,p=L(n,s,h);return Object(v.jsx)("td",{className:M(a,i,0,0,g,p),onContextMenu:function(e){return e.preventDefault()},children:Object(v.jsx)("button",{type:"button",className:I(0,i,o,u),onClick:function(){return F(n,s,l,r,u,j,h,b,m,f)},onContextMenu:function(e){return function(e,t,n,s,a,r,c,i){if(e.preventDefault(),"won"!==s&&"lost"!==s){var o=r[t][n];"hide"===o.state?(c((function(e){var s=Object(d.a)(e);return s[t][n].state="flag",s})),a((function(e){return e+1}))):"flag"===o.state?(c((function(e){var s=i?"mark":"hide",a=Object(d.a)(e);return a[t][n].state=s,a})),a((function(e){return e-1}))):"mark"===o.state&&c((function(e){var s=Object(d.a)(e);return s[t][n].state="hide",s}))}}(e,n,s,u,c,h,b,O)},children:k(a,i,o,u)})})},R=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]];function W(e,t){for(var n=[],s=0;s<e;s++){for(var a=[],r=0;r<t;r++)a.push({state:"hide",adjCount:0});n.push(a)}return n}function Q(e,t){for(var n=[],s=0;s<e;s++)s<t?n.push(!0):n.push(!1);return function(e){for(var t=0;t<e.length;t++){var n=G(t,e.length-1),s=[e[n],e[t]];e[t]=s[0],e[n]=s[1]}return e}(n)}function T(e,t,n,s){var a=Math.abs(e-n),r=Math.abs(t-s);return a<=1&&r<=1&&a+r>0}function E(e,t,n,s){return R.map((function(n){var s=Object(i.a)(n,2),a=s[0],r=s[1];return[e+a,t+r]})).filter((function(e){var t=Object(i.a)(e,2),a=t[0],r=t[1];return 0<=a&&a<n&&0<=r&&r<s}))}function G(e,t){return Math.floor(Math.random()*(t-e+1))+e}function D(e,t,n,s,a,r,c){var i=e.rows,o=e.columns,l=e.mines;a("reset"),t(l),n(0),s(0),c(),r(W(i,o))}function J(e,t,n,s,a,r){for(;e.length>0;){var c=e.pop(),o=Object(i.a)(c,2),l=o[0],u=o[1];if("hide"===s[l][u].state){var j=Object(d.a)(s);j[l][u].state="show",a(j),s[l][u].hasMine?(n("lost"),r()):(t((function(e){return e+1})),0===s[l][u].adjCount&&E(l,u,s.length,s[0].length).forEach((function(t){var n=Object(i.a)(t,2),a=n[0],r=n[1];"hide"===s[a][r].state&&e.push([a,r])})))}}}function L(e,t,n){var s=[n.length,n[0].length];return E(e,t,s[0],s[1]).filter((function(e){var t=Object(i.a)(e,2),s=t[0],a=t[1];return"flag"===n[s][a].state})).length-n[e][t].adjCount}var U=function(e){var t=e.args,n=t.mineCount,s=t.setRevealCount,a=t.setFlagCount,r=t.gameState,c=t.setGameState,i=t.field,o=t.setField,l=t.handleStart,u=t.handleStop,h=t.usingQs,d=t.usingWarnings;return Object(v.jsx)("table",{className:"field",children:Object(v.jsx)("tbody",{children:i.map((function(e,t){return Object(v.jsx)("tr",{children:e.map((function(e,b){return Object(v.jsx)(H,{args:Object(j.a)(Object(j.a)({},e),{},{rowInd:t,colInd:b,mineCount:n,setRevealCount:s,setFlagCount:a,gameState:r,setGameState:c,field:i,setField:o,handleStart:l,handleStop:u,usingWarnings:d,usingQs:h})},b)}))},t)}))})})},_=["Easy","Medium","Hard"],Y=["Rows","Columns","Mines"];function z(e,t){var n=t.rows,s=t.columns,a=t.mines;switch(e){case"mines":return 0<=a&&a<n*s;case"rows":return 0<n&&n<=24;case"columns":return 0<s&&s<=30;default:return!1}}function A(e){switch(e){case"easy":return{rows:9,columns:9,mines:10};case"medium":return{rows:16,columns:16,mines:40};case"hard":return{rows:16,columns:30,mines:99};default:return{rows:10,columns:10,mines:99}}}function B(e){var t=A(e.toLowerCase());return t.rows+"x"+t.columns+", "+t.mines+" mines"}function P(e){return Object(v.jsxs)("div",{className:"density",children:["Mine density:"," ",e.rows>0&&e.columns>0?Math.round(100*e.mines/(e.rows*e.columns))+"%":"N/A"]})}function V(e){switch(e){case"rows":return"Must be between 1 and 24 inclusive.";case"columns":return"Must be between 1 and 30 inclusive.";case"mines":return"Must be fewer mines than cells.";default:return"An unknown error has occured."}}function q(e,t,n,s){var a=t[e];(s>0||a>0)&&n(Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e,a+s)))}function $(e){var t=e.difficulty,n=e.inputs,s=e.setInputs,a=t.toLowerCase();return Object(v.jsxs)("div",{className:"radio",children:[Object(v.jsx)("input",{type:"radio",id:a,name:"difficulty",value:a,checked:n.difficulty===a,onChange:function(e){return function(e,t,n){n(Object(j.a)(Object(j.a)({},t),{},{difficulty:e.target.value}))}(e,n,s)}}),Object(v.jsxs)("label",{htmlFor:a,children:[Object(v.jsx)("div",{className:"diff",children:t+":"}),Object(v.jsx)("div",{className:"desc",children:B(t)})]})]})}function K(e){var t=e.input,n=e.inputs,s=e.setInputs,a=t.toLowerCase();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"input",children:[Object(v.jsxs)("label",{htmlFor:a,children:[t,":"]}),Object(v.jsx)("button",{type:"button",onClick:function(){return q(a,n,s,-1)},children:"-"}),Object(v.jsx)("input",{type:"text",id:a,name:a,value:n[a],onChange:function(e){return function(e,t,n,s){var a=e.target.value,r=+a;(function(e){return""===e||/^[0-9\b]+$/.test(e)})(a)&&n(Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},s,r)))}(e,n,s,a)}}),Object(v.jsx)("button",{type:"button",onClick:function(){return q(a,n,s,1)},children:"+"}),z(a,n)?Object(v.jsx)("span",{style:{color:"green"},children:"\u2713"}):Object(v.jsxs)("span",{className:"toolcontainer",style:{color:"red"},children:["\u2717",Object(v.jsx)("span",{className:"tooltip",children:V(a)})]})]})})}var X=function(e){var t=e.args,n=t.setMineCount,a=t.setRevealCount,r=t.setFlagCount,c=t.setGameState,o=t.setField,l=t.handleReset,u=t.usingQs,j=t.setUsingQs,h=t.usingWarnings,d=t.setUsingWarnings,f=Object(s.useState)({rows:9,columns:9,mines:10,difficulty:"easy"}),g=Object(i.a)(f,2),O=g[0],p=g[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:"Options"}),Object(v.jsxs)("div",{className:"option",children:[Object(v.jsx)("input",{type:"checkbox",id:"usingQs",name:"usingQs",value:!0,checked:u,onChange:function(){return j((function(e){return!e}))}}),Object(v.jsxs)("label",{htmlFor:"usingQs",children:["Use ",Object(v.jsx)("img",{className:"sml-img",src:m,alt:"'?'"})," in addition to ",Object(v.jsx)("img",{className:"sml-img",src:b,alt:"flag"})," on right-clicks"]})]}),Object(v.jsxs)("div",{className:"option",children:[Object(v.jsx)("input",{type:"checkbox",id:"usingWarnings",name:"usingWarnings",value:!0,checked:h,onChange:function(){return d((function(e){return!e}))}}),Object(v.jsx)("label",{htmlFor:"usingWarnings",children:"Highlight surpluses of adjacent flags"})]}),Object(v.jsxs)("div",{className:"options",children:[Object(v.jsxs)("div",{className:"option",children:[Object(v.jsx)("h4",{children:"Standard Game"}),_.map((function(e){return Object(v.jsx)($,{difficulty:e,inputs:O,setInputs:p},e)})),P(A(O.difficulty)),Object(v.jsx)("button",{type:"button",className:"start",onClick:function(){return function(e,t,n,s,a,r,c){D(A(e),t,n,s,a,r,c)}(O.difficulty,n,a,r,c,o,l)},children:"Start Standard Game"})]}),Object(v.jsxs)("div",{className:"option",children:[Object(v.jsx)("h4",{children:"Custom Game"}),Y.map((function(e){return Object(v.jsx)(K,{input:e,inputs:O,setInputs:p},e)})),P(O),Object(v.jsx)("button",{type:"button",className:"start",onClick:function(){return function(e,t,n,s,a,r,c){Y.every((function(t){return z(t.toLowerCase(),e)}))?D(e,t,n,s,a,r,c):alert('Invalid parameters. However over red "x"s for details.')}(O,n,a,r,c,o,l)},children:"Start Custom Game"})]})]})]})};var Z=function(e){var t=e.txt,n=e.action,a=e.setReset,r=Object(s.useState)(""),c=Object(i.a)(r,2),o=c[0],l=c[1];return Object(v.jsx)("div",{className:"resets",children:Object(v.jsxs)("form",{children:[Object(v.jsx)("label",{htmlFor:"input",children:'Type "'.concat(t,'": ')}),Object(v.jsx)("input",{type:"text",id:"input",name:"input",onChange:function(e){l(e.target.value)}}),Object(v.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),o===t?(n(),a("")):alert("Wrong confirmation; not reset.")},children:"Confirm reset"}),Object(v.jsx)("button",{type:"button",onClick:function(){l(""),a("")},children:"Cancel"})]})})};function ee(){return Object(v.jsxs)("div",{className:"rules",children:[Object(v.jsx)("h4",{children:"Rules"}),Object(v.jsx)("p",{children:"All cells start covered. Certain cells have mines hidden underneath them. The goal is to uncover all the cells without mines. If you uncover a mine, you lose."}),Object(v.jsx)("p",{children:"When you uncover a non-mine cell, it will show you how many of the (up to 8) adjacent cells contain mines -- or, if there are no adjacent mines, it will automatically uncover all adjacent cells for you."}),Object(v.jsx)("p",{children:"You can mark cells that you think contain mines with a flag by right-clicking on them. Clicking a flagged cell will do nothing -- so you can't accidentally click it later. To unflag a cell, simply right-click it again."}),Object(v.jsx)("p",{children:"If you click an already-uncovered cell and its number matches the number of adjacent flags, all other adjacent cells will be uncovered. This can save you some clicks, but isn't necessary."}),Object(v.jsx)("p",{children:"For a custom game, a mine density between 12% and 20% is recommended."}),Object(v.jsxs)("p",{children:["If you like minesweeper, consider"," ",Object(v.jsx)("a",{href:"https://www.chiark.greenend.org.uk/~sgtatham/puzzles/js/mines.html",target:"_blank",rel:"noopener noreferrer",children:"this superior implementation"})," ","which guarantees you will never need to guess, and"," ",Object(v.jsx)("a",{href:"https://pwmarcz.pl/kaboom/",target:"_blank",rel:"noopener noreferrer",children:"this neat variation"})," ","which always penalizes a guess, unless guessing is necessary in which case any guess will be fine."]})]})}var te=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{type:"button",className:"rules-button",onClick:function(){return a(!n)},children:n?"Hide Rules":"Show Rules"}),n&&Object(v.jsx)(ee,{})]})};function ne(e,t){switch(e){case"reset":return"The field is reset. Click anywhere to begin.";case"ongoing":return"The game is in progress.";case"won":return t?"Congratulations, you set a high score!":"Congratulations, you won!";case"lost":return"Uh oh, you uncovered a mine. You lost.";default:return"You found an error!"}}function se(e){if(e===Number.POSITIVE_INFINITY)return["N/A",""];var t=Math.floor(e/1e3).toString(),n=Math.floor(e%1e3/10);return[t,n<10?"0"+n:n.toString()]}var ae=function(e){var t=e.args,n=t.m,a=t.n,r=t.time,c=t.highScore,o=t.gameState,l=t.mineCount,u=t.flagCount,j=t.resetHighScore,h=t.resetHighScores,d=Object(s.useState)(""),b=Object(i.a)(d,2),m=b[0],f=b[1],g=se(r),O=Object(i.a)(g,2),p=O[0],x=O[1],S=se(c),w=Object(i.a)(S,2),y=w[0],C=w[1],N=r===c;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("p",{className:"stat",children:[Object(v.jsx)("span",{className:"name",children:"Flags: "}),Object(v.jsx)("span",{className:"value",children:u}),Object(v.jsx)("span",{className:"decimal"})]}),Object(v.jsxs)("p",{className:"stat",children:[Object(v.jsx)("span",{className:"name",children:"Time: "}),Object(v.jsx)("span",{className:"value",children:p}),Object(v.jsx)("span",{className:"decimal",children:"won"===o||"lost"===o?"."+x:""})]}),Object(v.jsxs)("p",{className:"stat",children:[Object(v.jsx)("span",{className:"name",children:"High Score: "}),Object(v.jsx)("span",{className:"value",children:y}),Object(v.jsx)("span",{className:"decimal",children:C&&"."+C})]}),Object(v.jsx)("p",{children:ne(o,N)}),""===m&&Object(v.jsxs)("div",{className:"resets",children:[Object(v.jsx)("button",{type:"button",onClick:function(){return f("one")},children:"Reset this high score"}),Object(v.jsx)("button",{type:"button",onClick:function(){return f("all")},children:"Reset all high scores"})]}),"one"===m&&Object(v.jsx)(Z,{txt:"reset one",action:function(){return j(n,a,l)},setReset:f}),"all"===m&&Object(v.jsx)(Z,{txt:"reset all",action:h,setReset:f}),Object(v.jsx)(te,{})]})};n(23),n(24),n(25),n(26),n(27);var re=function(){var e=Object(s.useState)(10),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(0),c=Object(i.a)(r,2),u=c[0],j=c[1],d=Object(s.useState)(0),b=Object(i.a)(d,2),m=b[0],f=b[1],g=Object(s.useState)("reset"),O=Object(i.a)(g,2),p=O[0],x=O[1],S=Object(s.useState)(W(9,9)),w=Object(i.a)(S,2),y=w[0],C=w[1],N=l(),k=N.time,M=N.handleStart,I=N.handleStop,F=N.handleReset,H=h(),R=H.getHighScore,Q=H.updateHighScore,T=H.resetHighScore,E=H.resetHighScores,G=R(y.length,y[0].length,n),D=Object(s.useState)(!1),J=Object(i.a)(D,2),L=J[0],_=J[1],Y=Object(s.useState)(!1),z=Object(i.a)(Y,2),A=z[0],B=z[1];return Object(s.useEffect)((function(){"ongoing"===p&&u+n===y.length*y[0].length&&(I(k),x("won"),Q(y.length,y[0].length,n,k))}),[u,n,y,I,p,Q,k]),Object(v.jsxs)(o.WithHeavyFooter,{children:[Object(v.jsxs)(o.Body,{children:[Object(v.jsx)("h1",{children:"Minesweeper"}),Object(v.jsx)(X,{args:{setMineCount:a,setRevealCount:j,setFlagCount:f,setGameState:x,setField:C,handleReset:F,usingQs:L,setUsingQs:_,usingWarnings:A,setUsingWarnings:B}}),Object(v.jsx)(U,{args:{mineCount:n,gameState:p,setGameState:x,field:y,setField:C,setRevealCount:j,setFlagCount:f,handleStart:M,handleStop:I,usingQs:L,usingWarnings:A}}),Object(v.jsx)(ae,{args:{m:y.length,n:y[0].length,time:k,highScore:G,gameState:p,mineCount:n,flagCount:m,resetHighScore:T,resetHighScores:E}})]}),Object(v.jsxs)(o.HeavyFooter,{children:[Object(v.jsx)(o.HomeLink,{}),Object(v.jsx)(o.CodeLink,{gitHubRepoName:"minesweeper"})]})]})};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(re,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.c13a2cf0.chunk.js.map